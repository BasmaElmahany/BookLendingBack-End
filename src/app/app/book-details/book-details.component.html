<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container">
    <a class="navbar-brand" href="#">Book Lending</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
      data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
      aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
     <li class="nav-item">
  <a class="nav-link"  [routerLink]="['/home']">Home</a>
</li>

        <li class="nav-item"><a class="nav-link" href="#">About</a></li>
        <li class="nav-item"><a class="nav-link" href="#" (click)="logout()">Logout</a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- Feedback Messages -->
<div class="container mt-4">
  <div *ngIf="successMessage" class="alert" [ngClass]="{
    'alert-success': successMessage.startsWith('âœ…'),
    'alert-warning': successMessage.startsWith('âš ï¸'),
    'alert-danger': successMessage.startsWith('âŒ')
  }">
    {{ successMessage }}
    <div *ngIf="returnDate && successMessage.startsWith('âœ…')">
      ðŸ“… Please return the book by: <strong>{{ returnDate | date: 'fullDate' }}</strong>
    </div>
  </div>

  <div *ngIf="returnMessage" class="alert alert-success">
    {{ returnMessage }}
  </div>

  <div *ngIf="returnError" class="alert alert-danger">
    {{ returnError }}
  </div>
</div>
<div class="container mt-4">
  <a routerLink="/home" class="btn btn-outline-secondary mb-3">
    <i class="bi bi-arrow-left"></i> Back to Home
  </a>
</div>

<!-- Book Details Card -->
<div class="container py-5" *ngIf="!loading && book">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card shadow-lg">
        <div class="row g-0">
          <div class="col-md-4">
            <img 
              src="https://images.augustman.com/wp-content/uploads/sites/3/2022/07/08170524/cd27cb70-4bdb-4989-829f-d32e50fe10b8.jpeg?tr=w-1920" 
              class="img-fluid rounded-start h-100 object-fit-cover" 
              alt="Book Cover" />
          </div>
          <div class="col-md-8">
            <div class="card-body">
              <h3 class="card-title text-primary">{{ book.title }}</h3>
              <p class="card-text"><strong>ðŸ‘¤ Author:</strong> {{ book.author }}</p>
              <p class="card-text"><strong>ðŸ“– Description:</strong> {{ book.description }}</p>
              <p class="card-text"><strong>ðŸ“… Published:</strong> {{ book.publishedAt | date: 'mediumDate' }}</p>
              <p class="card-text"><strong>ðŸ“š Catalog:</strong> {{ book.catalogName }}</p>
              <p class="card-text">
                <strong>ðŸ“¦ Status:</strong>
                <span class="badge" [ngClass]="book.isAvailable ? 'bg-success' : 'bg-danger'">
                  {{ book.isAvailable ? 'Available' : 'Borrowed' }}
                </span>
              </p>

              <!-- Borrow and Return Buttons -->
              <div class="mt-3">
                <button 
                  class="btn btn-success me-2" 
                  [disabled]="!book.isAvailable"
                  (click)="borrowBook(bookId)">
                  Borrow Book
                </button>

                <button 
                  class="btn btn-warning" 
                  [disabled]="book.isAvailable"
                  (click)="returnBook(bookId)">
                  Return Book
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>

<!-- Loading Spinner -->
<div class="text-center mt-5" *ngIf="loading">
  <div class="spinner-border text-primary" role="status"></div>
</div>
